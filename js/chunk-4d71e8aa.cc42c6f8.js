(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4d71e8aa"],{"291b":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("ArticlesComponent")],1)},r=[],i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"articles-container"},[s("h1",{staticClass:"articles-title"},[t._v("All Posts")]),s("b-alert",{staticClass:"delete-alert",attrs:{variant:"danger",dismissible:""},model:{value:t.errorAlert,callback:function(e){t.errorAlert=e},expression:"errorAlert"}},[t._v(" "+t._s(t.errorMessage)+" ")]),s("b-alert",{staticClass:"delete-alert",attrs:{variant:"success",dismissible:""},model:{value:t.successAlert,callback:function(e){t.successAlert=e},expression:"successAlert"}},[t._v("Article deleted successfuly")]),s("b-alert",{staticClass:"delete-alert",attrs:{variant:"success",dismissible:""},model:{value:this.$store.state.articles.createStatus,callback:function(e){t.$set(this.$store.state.articles,"createStatus",e)},expression:"this.$store.state.articles.createStatus"}},[t._v("Article created successfuly")]),s("b-alert",{staticClass:"delete-alert",attrs:{variant:"success",dismissible:"",show:""},model:{value:this.$store.state.articles.editStatus,callback:function(e){t.$set(this.$store.state.articles,"editStatus",e)},expression:"this.$store.state.articles.editStatus"}},[t._v("Article edited successfuly")]),s("b-row",{attrs:{"no-gutters":"","align-h":"start"}},[s("b-modal",{ref:"deleteModal",attrs:{id:"modal-center","ok-variant":"danger","ok-title":"YES","cancel-variant":"outline-dark","cancel-title":"NO",centered:"",title:"Delete Article"},on:{ok:function(e){return t.deleteEntity(t.itemToDeleteId)}}},[s("p",{staticClass:"my-4"},[t._v("Are you sure to delete Article?")])]),s("b-col",{attrs:{sm:"12",md:"12",lg:"12",xl:"12"}},[t.tableLoaded?s("b-table",{staticClass:"text-left",attrs:{id:"articles-table",hover:"","table-variant":"light",items:t.items,fields:t.fields,"head-variant":"light",stacked:"lg"},scopedSlots:t._u([{key:"cell(actions)",fn:function(e){return[s("b-dropdown",{attrs:{id:"dropdown-"+e.index,right:"",variant:"primary"},scopedSlots:t._u([{key:"button-content",fn:function(){return[s("span",{staticClass:"mr-2"},[t._v("...")])]},proxy:!0}],null,!0)},[s("b-dropdown-item",{on:{click:function(s){return t.goToEditPage(e.item)}}},[t._v("Edit")]),s("b-dropdown-item",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-center",modifiers:{"modal-center":!0}}],on:{click:function(s){return t.addArticleId(e.index)}}},[t._v("Delete")])],1)]}},{key:"table-busy",fn:function(){return[s("div",{staticClass:"text-center text-danger my-2"},[s("b-spinner",{staticClass:"align-middle",attrs:{variant:"primary"}})],1)]},proxy:!0}],null,!1,3939846159)}):s("div",{staticClass:"spiner-container"},[s("b-spinner",{attrs:{variant:"primary",label:"Spinning"}})],1),s("b-row",{attrs:{"no-gutters":"","align-h":"center"}},[s("b-col",{staticClass:"paging-container",attrs:{sm:"12",md:"12",lg:"12",xl:"12"}},[t.tableLoaded?s("b-pagination",{attrs:{"total-rows":t.rows,"per-page":t.perPage,"hide-goto-end-buttons":"",align:"center","page-class":"pagination-button-container","aria-controls":"articles-table"},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}}):t._e()],1)],1)],1)],1)],1)])},l=[],c=s("2f62"),o=s("d8d4"),n={data(){return{perPage:10,currentPage:1,itemToDeleteId:0,errorAlert:!1,successAlert:!1,tableLoaded:!1,errorMessage:"",fields:[{key:"index",label:"#"},{key:"title",label:"Title"},{key:"author",label:"Author"},{key:"tags",label:"Tags"},{key:"excerpt",label:"Excerpt"},{key:"created",label:"Created"},{key:"actions",label:""}]}},props:{createArticle:{type:Boolean},editArticle:{type:Boolean}},computed:{...Object(c["b"])({items:"articles/articles"}),rows(){return this.$store.state.articles.allArticles}},methods:{destroyAlerts(){this.$store.commit("articles/setCreateStatus",!1),this.$store.commit("articles/setEditStatus",!1),this.$store.commit("articles/changeEditError",!1),this.errorAlert=!1,this.successAlert=!1},deleteEntity(t){this.destroyAlerts();const e=this.items[t].slug;o["a"].delete(e).then(()=>{this.successAlert=!0,this.$store.commit("articles/deleteArticles",e)}).catch(t=>{console.log(t.response.data);let e=t.response.data.errors;const s=[];let a=Object.entries(e);for(let r=0;r<a.length;r++)s.push(a[r][0]+" "+a[r][1][0]);this.errorMessage=s.join(" , "),this.errorAlert=!0})},addArticleId(t){this.itemToDeleteId=t},goToEditPage(t){console.log(t),this.$router.push({path:"/articles/edit/"+t.slug})},fetchPageData(t){let e;if("number"===typeof t)e=t;else{const t=this.$route.name;e="articlePages"===t?parseInt(this.$route.params.page):1,this.currentPage=e}let s=10*(e-1);this.tableLoaded=!1,o["a"].getList({limit:10,offset:s}).then(t=>{this.$store.commit("articles/addArticles",t.data.articles),this.tableLoaded=!0,this.$store.commit("articles/setAllArticles",t.data.articlesCount)})}},beforeMount(){o["a"].getList({}).then(t=>{this.$store.commit("articles/setAllArticles",t.data.articlesCount)})},mounted(){this.fetchPageData()},watch:{currentPage(t,e){t!==e&&t!==parseInt(this.$route.params.page)&&(t>1?this.$router.push({name:"articlePages",params:{page:""+t}}):this.$router.push({name:"Articles"}),this.fetchPageData(t))}},beforeDestroy(){this.$store.commit("articles/setCreateStatus",!1),this.$store.commit("articles/setEditStatus",!1)}},d=n,u=(s("bdb1"),s("2877")),m=Object(u["a"])(d,i,l,!1,null,"0a053710",null),h=m.exports,p={components:{ArticlesComponent:h}},b=p,g=Object(u["a"])(b,a,r,!1,null,null,null);e["default"]=g.exports},ad7f:function(t,e,s){},bdb1:function(t,e,s){"use strict";s("ad7f")},d8d4:function(t,e,s){"use strict";var a=s("7424");const r={create(t){return a["a"].post("articles",{article:t})},getOne(t){return a["a"].get("articles",t)},getList(t={}){return a["a"].query("articles",{params:t})},delete(t){return a["a"].delete("articles/"+t)},update(t,e){return a["a"].update("articles",t,{article:e})}};e["a"]=r}}]);
//# sourceMappingURL=chunk-4d71e8aa.cc42c6f8.js.map